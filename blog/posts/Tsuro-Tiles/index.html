<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="./../../style.css">
</head>

<body class="blogpage">
  <div class="blogpost">
    <h1>Tsuro Tiles</h1>
    <h3>Thomas Porter, October 17, 2023</h3>

    <p>The board game Tsuro deals with tiles that look like this:
    </p>

    <img src="./images/img1.png" width=400px>

    <p class="">Each side of each tile has two channels, and each tile is a
      unique diagram pairing up the eight total channels. These 35 tiles are included - but are these all of the
      possible tiles? How many tiles would there be if each side had three channels, or even more?</p>
    <p>The naive way to count the possible tiles is to consider the
      following process: given a blank tile, pick the “first” channel (say the bottom, left one) and choose one of the
      seven remaining channels to connect to. With the six remaining channels, repeat, now with five options for the
      remaining channels. This gives 7*5*3*1 = 105 tiles. </p>
    <p>But this process doesn’t exactly correspond to the
      generation of a unique tile. The reason is that a single tile can be generated by multiple distinct processes,
      depending on the rotation of the tile used to determine which channel to start from. </p>

    <img src="./images/img2.png" width=400px>

    <p>Same tile, different processes.</p>
    <p>The process described actually generates oriented tiles,
      which are tiles with a specified notion of which way is up. There are 105 oriented tiles. The tile in the figure
      corresponds to four oriented tiles, two of which are shown, corresponding to its four rotations. Does that mean
      that 105/4 is the total number of non-oriented tiles? </p>
    <p>Well, certainly not, because 105 isn’t divisible by 4. The
      reason this method doesn’t work is because of symmetry. Tiles without symmetry, like that from the figure,
      correspond to 4 different oriented tiles, but tiles with exactly 2-fold rotational symmetry correspond to 2
      different oriented tiles, and tiles with 4-fold rotational symmetry only correspond to 1 oriented tile. Note
      that reflectional symmetry doesn’t factor into the analysis. </p>

    <img src="./images/img3.png" width=400px>

    <p>So, if we can count the number of oriented tiles with
      exactly 1-fold symmetry (no symmetry), 2-fold, and 4-fold symmetry, we can divide each by the appropriate factor
      and obtain our answer. </p>
    <p>It turns out that counting how many oriented tiles have
      1-fold symmetry, but no further symmetry, or 2-fold symmetry, but not 4-fold, cannot be done directly (as far as
      I know). We must count the oriented tiles with <em><em><em><em><em><em><em><em><em>at least
                      </em></em></em></em></em></em></em></em></em>n-fold symmetry.</p>
    <p>We already figured out how to count oriented tiles with at
      least 1-fold symmetry: 7*5*3*1 = 105. </p>
    <p>To count oriented tiles with at least 2-fold symmetry, we
      modify the basic process to enforce 2-fold rotational symmetry. The 1-channel can still go to any of the
      remaining seven channels. It could go directly to its opposite channel, 5, maintaining symmetry. This leaves six
      channels which must also be connected in a way that maintains 2-fold symmetry. </p>
    <p>If it goes anywhere except 5, we must also connect 5 to the
      opposite of wherever 1 connected to, to maintain symmetry. This leaves only four channels, which must also be
      connected in a 2-fold symmetrical way. </p>
    <p>This analysis suggests a recurrence relation. Let F2(n) be
      the number of ways to connect n channels in a two-fold symmetric way. The paragraphs above correspond to this
      equation:</p>
    <p>F2(n) = F2(n-2) + (n-2) * F2(n-4) ← more intuitive for
      combinatorics</p>
    <p>F2(2n) = F2(2(n-1)) + 2(n-1) * F2(2(n-2)) ← equivalent,
      clearer structure</p>
    <p>The first term is the “connect to opposite” case, which has
      one option and eliminates two channels, and the second is the “choose anything but the opposite” case, which has
      n-2 options and eliminates 4 channels. </p>
    <p>Let’s just say F2 is only defined on even numbers. With the
      base cases of F2(0) = 1, F2(-2) = 0, we can fill out a table:</p>
    <table>
      <tbody>
        <tr>
          <td>n</td>
          <td>F2(n)</td>
        </tr>
        <tr>
          <td>0</td>
          <td>1</td>
        </tr>
        <tr>
          <td>2</td>
          <td>1</td>
        </tr>
        <tr>
          <td>4</td>
          <td>3</td>
        </tr>
        <tr>
          <td>6</td>
          <td>7</td>
        </tr>
        <tr>
          <td>8</td>
          <td>25</td>
        </tr>
      </tbody>
    </table>
    <p>Giving 25 oriented tiles with at least 2-fold symmetry. </p>
    <p>The case for 4-fold symmetry is closely analogous.
      Conveniently, there are still only two cases (unlike for 3-fold symmetry) because the first channel cannot
      connect to the channel a quarter rotation from it. It must either connect opposite again, or connect to none of
      the four channels it can be rotated amongst. The recurrence relation this time is:</p>
    <p>F4(n) = F4(n-4) + (n-4) * F4(n-8) </p>
    <table>
      <tbody>
        <tr>
          <td>n</td>
          <td>F4(n)</td>
        </tr>
        <tr>
          <td>0</td>
          <td>1</td>
        </tr>
        <tr>
          <td>4</td>
          <td>1</td>
        </tr>
        <tr>
          <td>8</td>
          <td>5</td>
        </tr>
      </tbody>
    </table>
    <p>Giving 5 oriented tiles with at least 4-fold symmetry. </p>
    <p>Great! There are three bins of oriented tiles: 1-fold only,
      2-fold only, 4-fold only. We know that the three bins together have 105 elements, the last two bins together
      have 25 elements, and the last bin has 5 elements. Using simple differences, we know that the first bin has
      105-25 = 80 elements, the second bin has 25-5 = 20 elements, and the last bin has 5 elements. </p>
    <p>Dividing by the oriented tiles per non-oriented tile factor,
      which differs per bin, we get:</p>
    <p>(80 / 4) + (20 / 2) + (5 / 1) = 35. </p>
    <p>That’s it! Tsuro includes all possible tiles. </p>
    <p>This analysis can be generalized to any number of channels
      per side - the symmetries considered are the same, there’s still three bins. The only difference is how many
      rows of the table need to be filled out using the recurrence relation. </p>
    <p>My code computes:</p>
    <table>
      <tbody>
        <tr>
          <td>Channels per side</td>
          <td>Total tiles</td>
        </tr>
        <tr>
          <td>0</td>
          <td>1</td>
        </tr>
        <tr>
          <td>1</td>
          <td>2</td>
        </tr>
        <tr>
          <td>2</td>
          <td>35</td>
        </tr>
        <tr>
          <td>3</td>
          <td>2688</td>
        </tr>
        <tr>
          <td>4</td>
          <td>508277</td>
        </tr>
        <tr>
          <td>5</td>
          <td>163715822</td>
        </tr>
        <tr>
          <td>6</td>
          <td>79059439095</td>
        </tr>
        <tr>
          <td>7</td>
          <td>53364540054860</td>
        </tr>
        <tr>
          <td>8</td>
          <td>47974697008198312</td>
        </tr>
        <tr>
          <td>9</td>
          <td>55410773910104276992</td>
        </tr>
        <tr>
          <td>10</td>
          <td>79957746695043658285056</td>
        </tr>
      </tbody>
    </table>
    <p>It’s amazing how fast these numbers can be generated,
      especially when one imagines what that set of tiles would actually look like in the physical world. </p>
    <p>There are some obvious generalizations of the problem, which
      seem harder to me. If polygons other than squares, or even polyhedra or higher dimensional polytopes are
      considered, the structure of the symmetries will grow more complex. </p>
    <p>Burnside’s Lemma is the general principle used to deal with
      overcounting due to symmetry. My calculation was presented slightly differently from that suggested by the
      lemma, but it is directly equivalent. </p>
    <p>
    </p>

  </div>
</body>

</html>